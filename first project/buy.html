<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Купить BMW E34</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;600&family=Roboto+Condensed:ital,wght@0,300;0,400;1,300&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<header class="main-header">
  <div class="logo">
    <a href="index.html">
      <span class="logo-bmw">BMW</span>
      <span class="logo-model">E34</span>
      <span class="logo-years">Купить</span>
    </a>
  </div>
  <nav class="main-nav">
    <ul>
      <li><a href="index.html"><i class="fas fa-home"></i> Главная</a></li>
      <li><a href="gallery.html"><i class="fas fa-images"></i> Галерея</a></li>
      <li><a href="info.html"><i class="fas fa-info-circle"></i> История</a></li>
      <li><a href="buy.html" class="active"><i class="fas fa-shopping-cart"></i> Купить</a></li>
    </ul>
  </nav>
</header>


<main class="buy-page">
  <section class="page-header">
    <h1>Купить <span class="highlight">BMW E34</span></h1>
    <p class="page-subtitle">Актуальные предложения и советы по покупке</p>
  </section>

  
  <div class="warning-card">
    <div class="warning-icon">
      <i class="fas fa-exclamation-triangle"></i>
    </div>
    <div class="warning-content">
      <h3>Внимание покупателю!</h3>
      <p>E34 — автомобиль возрастом 25-35 лет. При покупке обратите особое внимание на состояние кузова (коррозия), двигателя (течи масла) и электроники. Рекомендуем проводить предварительный осмотр с опытным механиком.</p>
    </div>
  </div>

  
  <section class="offers-section">
    <h2 class="section-title">Текущие <span class="highlight">предложения</span></h2>
    <p class="section-subtitle">Обновлено: <span id="current-date"></span></p>

    <div class="offers-grid">
      
      <div class="offer-card">
        <div class="offer-header">
          <span class="offer-badge new">НОВОЕ</span>
          <span class="offer-price">450 000 ₽</span>
        </div>
        <div class="offer-image dusty" style="background-image: url('https://avatars.mds.yandex.net/get-autoru-vos/1687199/ce9ee75f3a0742736966f63c91101b95/1200x900');">
          <div class="offer-overlay">
            <span class="offer-location"><i class="fas fa-map-marker-alt"></i> Москва</span>
          </div>
        </div>
        <div class="offer-content">
          <h3>BMW 525i (E34)</h3>
          <div class="offer-details">
            <div class="detail">
              <i class="fas fa-calendar-alt"></i>
              <span>1993 год</span>
            </div>
            <div class="detail">
              <i class="fas fa-tachometer-alt"></i>
              <span>214 000 км</span>
            </div>
            <div class="detail">
              <i class="fas fa-gas-pump"></i>
              <span>Бензин, 2.5 л</span>
            </div>
            <div class="detail">
              <i class="fas fa-cog"></i>
              <span>МКПП</span>
            </div>
          </div>
          <p class="offer-description">Отличное состояние, один хозяин 15 лет, полная сервисная история. Без коррозии.</p>
          <div class="offer-features">
            <span class="feature-tag">Кожаный салон</span>
            <span class="feature-tag">Кондиционер</span>
            <span class="feature-tag">Литые диски</span>
          </div>
          <div class="offer-actions">
            <button class="btn btn-primary btn-small"><i class="fas fa-phone-alt"></i> Позвонить</button>
            <button class="btn btn-secondary btn-small"><i class="fas fa-envelope"></i> Написать</button>
            <a href="#" class="btn-details">Подробнее <i class="fas fa-arrow-right"></i></a>
          </div>
        </div>
      </div>

      
      <div class="offer-card featured">
        <div class="offer-header">
          <span class="offer-badge featured-badge">РЕКОМЕНДУЕМ</span>
          <span class="offer-price">1 200 000 ₽</span>
        </div>
        <div class="offer-image dusty" style="background-image: url('https://yandex-images.clstorage.net/9NHH9Z334/eaf993z74n/fbXmSelZ8aJB5i_IuCsRNdHo2SNribzyV4PIagNlcfGYIT11lIODu0olSl_3DxFj6kcPbTNYDePoQgyAbpavZ2z16gfyXeWlV-Joia50RSTNqI1iPt707EHfjHU7X0SduwsGSK-x54NcNwsJok4PJ6cuf39aInzP-Wt9027jhgBYqpoVtHDLgl3MCN7uDRQBp-XVD0qUkbdIitUnBWRom78nDWKQp8O0RCU0D6J8cTifF1M6bQ1T5eJncPx9z4UhZqK4N6JX7bB49h_uxAMPDoXo_gJNmouVS4LOJzVUSqqWGxlyjIPiulQRBh6CW2snpylrJVUJQPb8UXLQefStGECXqiO8bvKIfvIZ8cU2Ai-I1_kcZZW9imO-xjI3dH-psTgcWZyk5YVTJx0vjWZ0IIQTTSZ3BEPV-XF4w1nEmSRErYYgtEjttV3zEvL1AjAAj8j9JH2YkbBurMYWKlVgtI8mJ3-qs_-OVRwhA6l8Rie6CUQLcSFj0vxkV9Fj0ZISRLOPFLVT1KJRwijs2QAEP6fiyB9ChY-fYYPNLAprXI6XGxpYoJ3Jl04bIA6wVVMApTNkFWEcUuLrbUTsae2IJWGWqxCDcuqnWMMb6cYNOCCQ2usDXa-zlH6O5SQcVEeZsBcxU7Wa54ZAHy0uiWJwE6E0bwhlI33M7Fdf-0bjrRRMt7UykVvUjUPJCM3ECycjh_PcC3e2o7FuouQtD0ZPi7sEImOCouaZSzMuHLdzTSC0MlQobSV49ttIffBy7rkKRJSbCqNC_qFc4Drh3gQ6C6jy9R9amJG5UYDxLCZSc7CuBj1Nr4HPh2M4AA6kUkY3oxh1N1IicMz8aEf4QNabFn2Oly2MTOyCQsk7zdQPMBSY99Q_W6O2qUuTzjIhaGe-qwI7WZ6xxZ1uGys4gnNSPJMyWThKPF3g41JSzELBvR5glZgurVTlinfEF9LbMRwsj97WJGO-sa1agdgEFEc');">
          <div class="offer-overlay">
            <span class="offer-location"><i class="fas fa-map-marker-alt"></i> Санкт-Петербург</span>
          </div>
        </div>
        <div class="offer-content">
          <h3>BMW M5 (E34)</h3>
          <div class="offer-details">
            <div class="detail">
              <i class="fas fa-calendar-alt"></i>
              <span>1994 год</span>
            </div>
            <div class="detail">
              <i class="fas fa-tachometer-alt"></i>
              <span>167 000 км</span>
            </div>
            <div class="detail">
              <i class="fas fa-gas-pump"></i>
              <span>Бензин, 3.8 л</span>
            </div>
            <div class="detail">
              <i class="fas fa-cog"></i>
              <span>МКПП</span>
            </div>
          </div>
          <p class="offer-description">Коллекционное состояние. Полная оригинальность. Вся документация. Гаражное хранение.</p>
          <div class="offer-features">
            <span class="feature-tag">340 л.с.</span>
            <span class="feature-tag">Кожа Nappa</span>
            <span class="feature-tag">Сертификат BMW</span>
          </div>
          <div class="offer-actions">
            <button class="btn btn-primary btn-small"><i class="fas fa-phone-alt"></i> Позвонить</button>
            <button class="btn btn-secondary btn-small"><i class="fas fa-envelope"></i> Написать</button>
            <a href="#" class="btn-details">Подробнее <i class="fas fa-arrow-right"></i></a>
          </div>
        </div>
      </div>

      
      <div class="offer-card">
        <div class="offer-header">
          <span class="offer-badge discount">СКИДКА</span>
          <span class="offer-price"><s>300 000 ₽</s> 250 000 ₽</span>
        </div>
        <div class="offer-image dusty" style="background-image: url('https://avatars.mds.yandex.net/get-autoru-vos/5235035/8a109a83d6dca31be4879d5d32c017f3/1200x900');">
          <div class="offer-overlay">
            <span class="offer-location"><i class="fas fa-map-marker-alt"></i> Казань</span>
          </div>
        </div>
        <div class="offer-content">
          <h3>BMW 520i (E34)</h3>
          <div class="offer-details">
            <div class="detail">
              <i class="fas fa-calendar-alt"></i>
              <span>1991 год</span>
            </div>
            <div class="detail">
              <i class="fas fa-tachometer-alt"></i>
              <span>312 000 км</span>
            </div>
            <div class="detail">
              <i class="fas fa-gas-pump"></i>
              <span>Бензин, 2.0 л</span>
            </div>
            <div class="detail">
              <i class="fas fa-cog"></i>
              <span>АКПП</span>
            </div>
          </div>
          <p class="offer-description">Требует косметического ремонта. Двигатель и коробка в хорошем состоянии. Есть небольшая коррозия.</p>
          <div class="offer-features">
            <span class="feature-tag">Новый ТО</span>
            <span class="feature-tag">Зимняя резина</span>
          </div>
          <div class="offer-actions">
            <button class="btn btn-primary btn-small"><i class="fas fa-phone-alt"></i> Позвонить</button>
            <button class="btn btn-secondary btn-small"><i class="fas fa-envelope"></i> Написать</button>
            <a href="#" class="btn-details">Подробнее <i class="fas fa-arrow-right"></i></a>
          </div>
        </div>
      </div>

      
      <div class="offer-card">
        <div class="offer-header">
          <span class="offer-badge">ПОД ЗАКАЗ</span>
          <span class="offer-price">от 800 000 ₽</span>
        </div>
        <div class="offer-image dusty" style="background-image: url('https://avatars.mds.yandex.net/get-autoru-vos/2160970/a2373ed347fef059fc456967f38e0777/1200x900');">
          <div class="offer-overlay">
            <span class="offer-location"><i class="fas fa-map-marker-alt"></i> Германия</span>
          </div>
        </div>
        <div class="offer-content">
          <h3>BMW 530i (E34)</h3>
          <div class="offer-details">
            <div class="detail">
              <i class="fas fa-calendar-alt"></i>
              <span>1995 год</span>
            </div>
            <div class="detail">
              <i class="fas fa-tachometer-alt"></i>
              <span>~120 000 км</span>
            </div>
            <div class="detail">
              <i class="fas fa-gas-pump"></i>
              <span>Бензин, 3.0 л V8</span>
            </div>
            <div class="detail">
              <i class="fas fa-cog"></i>
              <span>АКПП</span>
            </div>
          </div>
          <p class="offer-description">Поиск и доставка из Германии. Подбор по вашим параметрам. Растаможка.</p>
          <div class="offer-features">
            <span class="feature-tag">Правый руль</span>
            <span class="feature-tag">Немецкий рынок</span>
            <span class="feature-tag">Полный пакет</span>
          </div>
          <div class="offer-actions">
            <button class="btn btn-primary btn-small"><i class="fas fa-search"></i><a href="#search-section" style="text-decoration: none; color: inherit;">Подобрать</a></button>
            <button class="btn btn-secondary btn-small"><i class="fas fa-calculator"></i><a>Рассчитать</a></button>
          </div>
        </div>
      </div>
    </div>
  </section>

  
  <section class="search-section" id="search-section">
    <div class="search-card skewed-left">
      <h2><i class="fas fa-search"></i> Поиск <span class="highlight">вашей</span> E34</h2>
      <p>Заполните параметры, и мы уведомим вас о появлении подходящих предложений</p>

      <form class="search-form">
        <div class="form-row">
          <div class="form-group">
            <label for="model"><i class="fas fa-car"></i> Модель</label>
            <select id="model" name="model">
              <option value="any">Любая</option>
              <option value="518">518i</option>
              <option value="520">520i</option>
              <option value="525">525i</option>
              <option value="530">530i</option>
              <option value="535">535i</option>
              <option value="540">540i</option>
              <option value="m5">M5</option>
              <option value="touring">Touring</option>
            </select>
          </div>
          <div class="form-group">
            <label for="year"><i class="fas fa-calendar"></i> Год от</label>
            <select id="year" name="year">
              <option value="any">Любой</option>
              <option value="1988">1988</option>
              <option value="1989">1989</option>
              <option value="1990">1990</option>
              <option value="1991">1991</option>
              <option value="1992">1992</option>
              <option value="1993">1993</option>
              <option value="1994">1994</option>
              <option value="1995">1995</option>
              <option value="1996">1996</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="price"><i class="fas fa-ruble-sign"></i> Бюджет, ₽</label>
            <input type="range" id="price" name="price" min="100000" max="2000000" step="100000" value="500000">
            <div class="price-range">
              <span>100 000</span>
              <span id="price-value">500 000</span>
              <span>2 000 000</span>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label><i class="fas fa-cogs"></i> Трансмиссия</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="transmission" value="manual" checked> МКПП</label>
              <label><input type="checkbox" name="transmission" value="auto"> АКПП</label>
            </div>
          </div>
          <div class="form-group">
            <label><i class="fas fa-paint-brush"></i> Состояние</label>
            <div class="checkbox-group">
              <label><input type="checkbox" name="condition" value="excellent"> Отличное</label>
              <label><input type="checkbox" name="condition" value="good" checked> Хорошее</label>
              <label><input type="checkbox" name="condition" value="repair"> Требует ремонта</label>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label for="email"><i class="fas fa-envelope"></i> Ваш email для уведомлений</label>
            <input type="email" id="email" name="email" placeholder="e34enthusiast@example.com">
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary btn-large">
            <i class="fas fa-bell"></i> Уведомлять о предложениях
          </button>
          <button type="reset" class="btn btn-secondary btn-large">
            <i class="fas fa-redo"></i> Сбросить
          </button>
        </div>
      </form>
    </div>
  </section>

  
  <section class="tips-section">
    <h2 class="section-title">Советы по <span class="highlight">покупке</span></h2>

    <div class="tips-grid">
      <div class="tip-card">
        <div class="tip-number">1</div>
        <h3>Осмотр кузова</h3>
        <p>Проверьте пороги, арки колес, нижние части дверей. E34 оцинкована, но в некоторых местах коррозия возможна.</p>
      </div>
      <div class="tip-card offset-right">
        <div class="tip-number">2</div>
        <h3>Двигатель</h3>
        <p>Слушайте на холодную и горячую. Проверьте течи масла. Двигатели M50 и M60 надежны при своевременном обслуживании.</p>
      </div>
      <div class="tip-card offset-left">
        <div class="tip-number">3</div>
        <h3>Ходовая часть</h3>
        <p>Проверьте состояние сайлентблоков, шаровых опор, рулевых наконечников. Протестируйте на разных скоростях.</p>
      </div>
      <div class="tip-card">
        <div class="tip-number">4</div>
        <h3>Электрика</h3>
        <p>Проверьте всю электронику: сиденья, окна, люк, фары, кондиционер. Ремонт может быть дорогим.</p>
      </div>
    </div>

    <div class="resources-card">
      <h3><i class="fas fa-link"></i> Полезные ресурсы</h3>
      <ul>
        <li><a href="https://www.bimmerforums.com/forum/forumdisplay.php?f=14" target="_blank">Форум Bimmerforums (E34 секция)</a></li>
        <li><a href="https://www.realoem.com" target="_blank">RealOEM.com</a> - Каталог оригинальных запчастей</li>
        <li><a href="https://www.bmwfanatics.ru" target="_blank">BMWFanatics.ru</a> - Русскоязычное сообщество</li>
        <li><a href="#" target="_blank">PDF руководство по эксплуатации E34 (скачать)</a></li>
      </ul>
    </div>
  </section>
</main>


<footer class="main-footer">
  <div class="footer-content">
    <div class="footer-logo">
      <span class="logo-bmw">BMW</span> <span class="logo-model">E34</span>
      <p>Покупка легенды</p>
    </div>
    <div class="footer-links">
      <h4>Навигация</h4>
      <ul>
        <li><a href="index.html">Главная</a></li>
        <li><a href="gallery.html">Галерея</a></li>
        <li><a href="info.html">История</a></li>
        <li><a href="buy.html" class="active">Купить</a></li>
      </ul>
    </div>
    <div class="footer-info">
      <h4>Помощь в покупке</h4>
      <p>Нужна помощь в осмотре или подборе?</p>
      <a href="mailto:buy@e34-enthusiasts.com" class="footer-btn">Консультация</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p><strong>Внимание:</strong> Сайт не является автосалоном. Все объявления размещены для примера.</p>
    <p>© 2023 Покупка BMW E34. Будьте внимательны при покупке старых автомобилей.</p>
  </div>
</footer>



<div id="callModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2><i class="fas fa-phone-alt"></i> Заказ звонка</h2>
    <p>Оставьте ваш номер телефона, и мы перезвоним вам в течение 15 минут</p>

    <form id="callForm" class="contact-form">
      <div class="form-group">
        <label for="callName"><i class="fas fa-user"></i> Ваше имя</label>
        <input type="text" id="callName" name="name" placeholder="Иван Иванов" required>
      </div>

      <div class="form-group">
        <label for="callPhone"><i class="fas fa-phone"></i> Номер телефона</label>
        <input type="tel" id="callPhone" name="phone" placeholder="+7 (999) 123-45-67" required pattern="^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$">
        <small>Формат: +7 (999) 123-45-67</small>
      </div>

      <div class="form-group">
        <label for="callTime"><i class="fas fa-clock"></i> Удобное время для звонка</label>
        <select id="callTime" name="time">
          <option value="any">В любое время</option>
          <option value="morning">Утро (9:00 - 12:00)</option>
          <option value="day">День (12:00 - 18:00)</option>
          <option value="evening">Вечер (18:00 - 21:00)</option>
        </select>
      </div>

      <div class="form-group">
        <label for="callCar">Интересующая модель</label>
        <select id="callCar" name="car">
          <option value="bmw-525i">BMW 525i (E34)</option>
          <option value="bmw-530i">BMW 530i (E34)</option>
          <option value="bmw-535i">BMW 535i (E34)</option>
          <option value="bmw-540i">BMW 540i (E34)</option>
          <option value="bmw-m5">BMW M5 (E34)</option>
          <option value="bmw-touring">BMW Touring (E34)</option>
          <option value="any">Любая модель</option>
        </select>
      </div>

      <div class="form-group">
        <label for="callMessage"><i class="fas fa-comment"></i> Комментарий (необязательно)</label>
        <textarea id="callMessage" name="message" rows="3" placeholder="Укажите дополнительные пожелания..."></textarea>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" name="privacy" required checked>
          Соглашаюсь с обработкой персональных данных
        </label>
      </div>

      <button type="submit" class="btn btn-primary btn-large">
        <i class="fas fa-phone-volume"></i> Жду звонка
      </button>
    </form>

    <div class="contact-info">
      <p><i class="fas fa-info-circle"></i> Или позвоните нам сами: <strong>+7 (495) 123-45-67</strong></p>
    </div>
  </div>
</div>


<div id="messageModal" class="modal">
  <div class="modal-content">
    <span class="close-modal">&times;</span>
    <h2><i class="fas fa-envelope"></i> Написать сообщение</h2>
    <p>Отправьте нам сообщение, и мы ответим в течение 24 часов</p>

    <form id="messageForm" class="contact-form">
      <div class="form-row">
        <div class="form-group">
          <label for="messageName"><i class="fas fa-user"></i> Ваше имя</label>
          <input type="text" id="messageName" name="name" placeholder="Иван Иванов" required>
        </div>

        <div class="form-group">
          <label for="messageEmail"><i class="fas fa-envelope"></i> Email</label>
          <input type="email" id="messageEmail" name="email" placeholder="ivan@example.com" required>
        </div>
      </div>

      <div class="form-group">
        <label for="messageSubject"><i class="fas fa-tag"></i> Тема сообщения</label>
        <select id="messageSubject" name="subject">
          <option value="buy">Покупка BMW E34</option>
          <option value="consult">Консультация по выбору</option>
          <option value="inspection">Осмотр автомобиля</option>
          <option value="parts">Запчасти для E34</option>
          <option value="other">Другой вопрос</option>
        </select>
      </div>

      <div class="form-group">
        <label for="messageCar">Интересующая модель</label>
        <input type="text" id="messageCar" name="car" placeholder="Например: BMW 525i 1993 года" required>
      </div>

      <div class="form-group">
        <label for="messageText"><i class="fas fa-edit"></i> Ваше сообщение</label>
        <textarea id="messageText" name="message" rows="5" placeholder="Опишите подробно ваш вопрос или интерес..." required></textarea>
      </div>

      <div class="form-group">
        <label for="messageFiles"><i class="fas fa-paperclip"></i> Прикрепить файлы (до 3 файлов)</label>
        <input type="file" id="messageFiles" name="files" multiple accept=".jpg,.jpeg,.png,.pdf,.doc,.docx">
        <small>Можно прикрепить фото автомобиля, документы (макс. 5МБ каждый)</small>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" name="newsletter">
          Хочу получать новости о BMW E34 и скидки
        </label>
      </div>

      <div class="form-group checkbox-group">
        <label>
          <input type="checkbox" name="privacy" required checked>
          Соглашаюсь с обработкой персональных данных
        </label>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary btn-large">
          <i class="fas fa-paper-plane"></i> Отправить сообщение
        </button>
        <button type="reset" class="btn btn-secondary">
          <i class="fas fa-redo"></i> Очистить
        </button>
      </div>
    </form>

    <div class="contact-info">
      <p><i class="fas fa-envelope"></i> Или напишите на email: <strong>bmw-e34@example.com</strong></p>
    </div>
  </div>
</div>


<div id="successModal" class="modal success-modal">
  <div class="modal-content">
    <div class="success-icon">
      <i class="fas fa-check-circle"></i>
    </div>
    <h2>Спасибо!</h2>
    <p id="successMessage">Ваша заявка успешно отправлена</p>
    <p>Мы свяжемся с вами в ближайшее время</p>
    <button class="btn btn-primary close-success">Отлично!</button>
  </div>
</div>

<div id="calcModal" class="modal">
  <div class="modal-content calc-modal">
    <span class="close-modal">&times;</span>
    <h2><i class="fas fa-calculator"></i> Расчет стоимости BMW E34</h2>
    <p>Рассчитайте примерную стоимость автомобиля с учетом ваших параметров</p>

    <div class="calc-steps">
      
      <div class="calc-step active" id="step1">
        <h3><span class="step-number">1</span> Выберите модель</h3>
        <div class="calc-options">
          <div class="calc-option" data-model="520i" data-price="200000">
            <div class="option-icon"><i class="fas fa-car"></i></div>
            <div class="option-content">
              <h4>520i (M20B20)</h4>
              <p>2.0 л, 129 л.с.</p>
              <span class="option-price">от 200 000 ₽</span>
            </div>
          </div>

          <div class="calc-option" data-model="525i" data-price="300000">
            <div class="option-icon"><i class="fas fa-tachometer-alt"></i></div>
            <div class="option-content">
              <h4>525i (M50B25)</h4>
              <p>2.5 л, 192 л.с.</p>
              <span class="option-price">от 300 000 ₽</span>
            </div>
          </div>

          <div class="calc-option" data-model="530i" data-price="500000">
            <div class="option-icon"><i class="fas fa-star"></i></div>
            <div class="option-content">
              <h4>530i (M60B30)</h4>
              <p>3.0 л V8, 218 л.с.</p>
              <span class="option-price">от 500 000 ₽</span>
            </div>
          </div>

          <div class="calc-option" data-model="535i" data-price="450000">
            <div class="option-icon"><i class="fas fa-bolt"></i></div>
            <div class="option-content">
              <h4>535i (M30B35)</h4>
              <p>3.5 л, 211 л.с.</p>
              <span class="option-price">от 450 000 ₽</span>
            </div>
          </div>

          <div class="calc-option" data-model="540i" data-price="800000">
            <div class="option-icon"><i class="fas fa-crown"></i></div>
            <div class="option-content">
              <h4>540i (M60B40)</h4>
              <p>4.0 л V8, 286 л.с.</p>
              <span class="option-price">от 800 000 ₽</span>
            </div>
          </div>

          <div class="calc-option" data-model="M5" data-price="1200000">
            <div class="option-icon"><i class="fas fa-flag-checkered"></i></div>
            <div class="option-content">
              <h4>M5 (S38B38)</h4>
              <p>3.8 л, 340 л.с.</p>
              <span class="option-price">от 1 200 000 ₽</span>
            </div>
          </div>
        </div>
        <button class="btn btn-primary next-step" data-next="step2">Далее <i class="fas fa-arrow-right"></i></button>
      </div>

      
      <div class="calc-step" id="step2">
        <h3><span class="step-number">2</span> Состояние автомобиля</h3>
        <div class="condition-options">
          <div class="condition-option" data-condition="repair" data-multiplier="0.6">
            <h4><i class="fas fa-tools"></i> Требует ремонта</h4>
            <p>Нужен кузовной/технический ремонт</p>
            <span class="multiplier">× 0.6</span>
          </div>

          <div class="condition-option" data-condition="good" data-multiplier="1.0">
            <h4><i class="fas fa-check-circle"></i> Хорошее</h4>
            <p>На ходу, небольшой износ</p>
            <span class="multiplier">× 1.0</span>
          </div>

          <div class="condition-option" data-condition="excellent" data-multiplier="1.5">
            <h4><i class="fas fa-gem"></i> Отличное</h4>
            <p>Полностью исправен, ухожен</p>
            <span class="multiplier">× 1.5</span>
          </div>

          <div class="condition-option" data-condition="collector" data-multiplier="2.0">
            <h4><i class="fas fa-trophy"></i> Коллекционное</h4>
            <p>Первый хозяин, сервисная история</p>
            <span class="multiplier">× 2.0</span>
          </div>
        </div>
        <div class="step-buttons">
          <button class="btn btn-secondary prev-step" data-prev="step1"><i class="fas fa-arrow-left"></i> Назад</button>
          <button class="btn btn-primary next-step" data-next="step3">Далее <i class="fas fa-arrow-right"></i></button>
        </div>
      </div>

      
      <div class="calc-step" id="step3">
        <h3><span class="step-number">3</span> Дополнительные параметры</h3>

        <div class="calc-sliders">
          <div class="slider-group">
            <label>Пробег (тыс. км)</label>
            <input type="range" class="calc-slider" id="mileageSlider" min="50" max="500" value="200" step="10">
            <div class="slider-value">
              <span>50</span>
              <span id="mileageValue">200</span>
              <span>500</span>
            </div>
          </div>

          <div class="slider-group">
            <label>Год выпуска</label>
            <input type="range" class="calc-slider" id="yearSlider" min="1988" max="1996" value="1992" step="1">
            <div class="slider-value">
              <span>1988</span>
              <span id="yearValue">1992</span>
              <span>1996</span>
            </div>
          </div>

          <div class="calc-checkboxes">
            <h4>Дополнительные опции:</h4>
            <div class="checkbox-grid">
              <label>
                <input type="checkbox" name="options" value="manual" checked data-price="0">
                <span>МКПП</span>
              </label>
              <label>
                <input type="checkbox" name="options" value="auto" data-price="50000">
                <span>АКПП (+50 000 ₽)</span>
              </label>
              <label>
                <input type="checkbox" name="options" value="leather" data-price="80000">
                <span>Кожаный салон (+80 000 ₽)</span>
              </label>
              <label>
                <input type="checkbox" name="options" value="wood" data-price="40000">
                <span>Деревянная отделка (+40 000 ₽)</span>
              </label>
              <label>
                <input type="checkbox" name="options" value="sunroof" data-price="30000">
                <span>Люк (+30 000 ₽)</span>
              </label>
              <label>
                <input type="checkbox" name="options" value="climate" data-price="60000">
                <span>Климат-контроль (+60 000 ₽)</span>
              </label>
            </div>
          </div>
        </div>

        <div class="step-buttons">
          <button class="btn btn-secondary prev-step" data-prev="step2"><i class="fas fa-arrow-left"></i> Назад</button>
          <button class="btn btn-primary next-step" data-next="step4">Рассчитать <i class="fas fa-calculator"></i></button>
        </div>
      </div>

      
      <div class="calc-step" id="step4">
        <h3><span class="step-number">4</span> Результат расчета</h3>

        <div class="calc-result">
          <div class="result-summary">
            <div class="result-icon">
              <i class="fas fa-car"></i>
            </div>
            <div class="result-details">
              <h4 id="resultModel">BMW 525i (M50B25)</h4>
              <p id="resultDetails">1992 год • 200 тыс. км • Хорошее состояние</p>
            </div>
            <div class="result-price">
              <div class="price-final" id="finalPrice">450 000 ₽</div>
              <div class="price-range" id="priceRange">400 000 - 500 000 ₽</div>
            </div>
          </div>

          <div class="result-breakdown">
            <h5>Состав стоимости:</h5>
            <div class="breakdown-list">
              <div class="breakdown-item">
                <span>Базовая цена модели</span>
                <span id="breakdownBase">300 000 ₽</span>
              </div>
              <div class="breakdown-item">
                <span>Коэффициент состояния</span>
                <span id="breakdownCondition">× 1.0</span>
              </div>
              <div class="breakdown-item">
                <span>Коррекция пробега</span>
                <span id="breakdownMileage">0 ₽</span>
              </div>
              <div class="breakdown-item">
                <span>Дополнительные опции</span>
                <span id="breakdownOptions">0 ₽</span>
              </div>
              <div class="breakdown-item total">
                <span>Итоговая стоимость</span>
                <span id="breakdownTotal">300 000 ₽</span>
              </div>
            </div>
          </div>

          <div class="result-actions">
            <button class="btn btn-primary" id="saveCalculation">
              <i class="fas fa-save"></i> Сохранить расчет
            </button>
            <button class="btn btn-secondary" id="newCalculation">
              <i class="fas fa-redo"></i> Новый расчет
            </button>
            <button class="btn btn-outline" id="contactForThis">
              <i class="fas fa-envelope"></i> Узнать о наличии
            </button>
          </div>

          <div class="result-note">
            <p><i class="fas fa-info-circle"></i> Это ориентировочная стоимость. Финальная цена зависит от реального состояния конкретного автомобиля.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>

  document.addEventListener('DOMContentLoaded', function() {
    const now = new Date();
    const options = { day: 'numeric', month: 'long', year: 'numeric' };
    document.getElementById('current-date').textContent = now.toLocaleDateString('ru-RU', options);


    const priceSlider = document.getElementById('price');
    const priceValue = document.getElementById('price-value');

    priceSlider.addEventListener('input', function() {
      const value = parseInt(this.value).toLocaleString('ru-RU');
      priceValue.textContent = value + ' ₽';
    });


    const initialValue = parseInt(priceSlider.value).toLocaleString('ru-RU');
    priceValue.textContent = initialValue + ' ₽';
  });


  function initContactForms() {
    console.log('Initializing contact forms');


    document.querySelectorAll('.btn-small').forEach(button => {
      const buttonText = button.textContent.toLowerCase();

      if (buttonText.includes('позвонить')) {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          openModal('callModal');
        });
      }

      if (buttonText.includes('написать')) {
        button.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          openModal('messageModal');
        });
      }
    });


    document.querySelectorAll('.close-modal, .close-success').forEach(closeBtn => {
      closeBtn.addEventListener('click', function() {
        closeModal(this.closest('.modal'));
      });
    });


    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', function(e) {
        if (e.target === this) {
          closeModal(this);
        }
      });
    });


    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        document.querySelectorAll('.modal').forEach(modal => {
          closeModal(modal);
        });
      }
    });


    initFormSubmission();
  }

  function openModal(modalId) {
    const modal = document.getElementById(modalId);
    if (modal) {
      modal.style.display = 'block';
      document.body.style.overflow = 'hidden'; // Блокируем скролл
      console.log('Opened modal:', modalId);
    }
  }

  function closeModal(modal) {
    if (modal) {
      modal.style.display = 'none';
      document.body.style.overflow = 'auto'; // Разблокируем скролл
      console.log('Closed modal');
    }
  }

  function initFormSubmission() {

    const callForm = document.getElementById('callForm');
    if (callForm) {
      callForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (validateForm(this)) {
          submitCallForm(this);
        }
      });
    }


    const messageForm = document.getElementById('messageForm');
    if (messageForm) {
      messageForm.addEventListener('submit', function(e) {
        e.preventDefault();
        if (validateForm(this)) {
          submitMessageForm(this);
        }
      });
    }
  }

  function validateForm(form) {
    let isValid = true;
    const inputs = form.querySelectorAll('input, select, textarea');

    inputs.forEach(input => {

      input.classList.remove('error');
      const errorSpan = input.nextElementSibling;
      if (errorSpan && errorSpan.classList.contains('error-message')) {
        errorSpan.remove();
      }


      if (input.hasAttribute('required') && !input.value.trim()) {
        showError(input, 'Это поле обязательно для заполнения');
        isValid = false;
      }


      if (input.type === 'email' && input.value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(input.value)) {
          showError(input, 'Введите корректный email адрес');
          isValid = false;
        }
      }


      if (input.type === 'tel' && input.value) {
        const phoneRegex = /^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/;
        if (!phoneRegex.test(input.value.replace(/\s/g, ''))) {
          showError(input, 'Введите корректный номер телефона');
          isValid = false;
        }
      }


      if (input.type === 'checkbox' && input.hasAttribute('required') && !input.checked) {
        showError(input, 'Необходимо согласие');
        isValid = false;
      }
    });

    return isValid;
  }

  function showError(input, message) {
    input.classList.add('error');
    input.style.borderColor = '#ff4444';

    const errorSpan = document.createElement('span');
    errorSpan.className = 'error-message';
    errorSpan.textContent = message;
    errorSpan.style.cssText = `
        color: #ff4444;
        font-size: 0.85rem;
        margin-top: 5px;
        display: block;
    `;

    input.parentNode.insertBefore(errorSpan, input.nextSibling);


    input.addEventListener('input', function() {
      this.classList.remove('error');
      this.style.borderColor = '';
      if (errorSpan.parentNode) {
        errorSpan.remove();
      }
    }, { once: true });
  }

  function submitCallForm(form) {
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());

    console.log('Call form submitted:', data);


    simulateSubmission('callModal', 'Заявка на звонок успешно отправлена! Мы перезвоним вам в течение 15 минут.');
  }

  function submitMessageForm(form) {
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());


    const files = form.querySelector('input[type="file"]').files;
    if (files.length > 0) {
      console.log('Attached files:', files.length);
      data.files = Array.from(files).map(f => f.name);
    }

    console.log('Message form submitted:', data);


    simulateSubmission('messageModal', 'Сообщение успешно отправлено! Мы ответим вам в течение 24 часов.');
  }

  function simulateSubmission(closeModalId, successMessage) {

    const submitButton = document.querySelector(`#${closeModalId.replace('Modal', 'Form')} button[type="submit"]`);
    const originalText = submitButton.innerHTML;
    submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Отправка...';
    submitButton.disabled = true;


    setTimeout(() => {

      closeModal(document.getElementById(closeModalId));


      const form = document.getElementById(closeModalId.replace('Modal', 'Form'));
      if (form) form.reset();


      submitButton.innerHTML = originalText;
      submitButton.disabled = false;


      setTimeout(() => {
        showSuccessMessage(successMessage);
      }, 300);
    }, 1500);
  }

  function showSuccessMessage(message) {
    const successModal = document.getElementById('successModal');
    const successMessage = document.getElementById('successMessage');

    if (successModal && successMessage) {
      successMessage.textContent = message;
      openModal('successModal');


      setTimeout(() => {
        closeModal(successModal);
      }, 5000);
    }
  }


  document.addEventListener('DOMContentLoaded', function() {
    initContactForms();
  });


  class PriceCalculator {
    constructor() {
      this.selectedModel = '525i';
      this.basePrice = 300000;
      this.conditionMultiplier = 1.0;
      this.mileage = 200; // тыс. км
      this.year = 1992;
      this.selectedOptions = [];
      this.optionPrices = {
        manual: 0,
        auto: 50000,
        leather: 80000,
        wood: 40000,
        sunroof: 30000,
        climate: 60000
      };
    }

    init() {
      this.bindEvents();
      this.initSliders();
      this.updateCalculation();
    }

    bindEvents() {

      document.querySelectorAll('.btn-small').forEach(button => {
        if (button.textContent.includes('Рассчитать')) {
          button.addEventListener('click', (e) => {
            e.preventDefault();
            e.stopPropagation();
            this.openCalculator();
          });
        }
      });


      document.querySelectorAll('.calc-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.calc-option').forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');

          this.selectedModel = option.dataset.model;
          this.basePrice = parseInt(option.dataset.price);


          const modelName = option.querySelector('h4').textContent;
          document.getElementById('resultModel').textContent = `BMW ${this.selectedModel} (${modelName.split('(')[1] || ''}`;

          this.updateCalculation();
        });
      });


      document.querySelectorAll('.condition-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.condition-option').forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');

          this.conditionMultiplier = parseFloat(option.dataset.multiplier);
          this.updateCalculation();
        });
      });


      document.querySelectorAll('.next-step').forEach(button => {
        button.addEventListener('click', () => {
          const nextStep = button.dataset.next;
          this.goToStep(nextStep);
        });
      });

      document.querySelectorAll('.prev-step').forEach(button => {
        button.addEventListener('click', () => {
          const prevStep = button.dataset.prev;
          this.goToStep(prevStep);
        });
      });


      document.querySelectorAll('input[name="options"]').forEach(checkbox => {
        checkbox.addEventListener('change', () => {
          this.updateSelectedOptions();
          this.updateCalculation();
        });
      });


      document.getElementById('saveCalculation')?.addEventListener('click', () => this.saveCalculation());
      document.getElementById('newCalculation')?.addEventListener('click', () => this.resetCalculator());
      document.getElementById('contactForThis')?.addEventListener('click', () => this.contactForThisCar());
    }

    initSliders() {
      const mileageSlider = document.getElementById('mileageSlider');
      const mileageValue = document.getElementById('mileageValue');
      const yearSlider = document.getElementById('yearSlider');
      const yearValue = document.getElementById('yearValue');

      if (mileageSlider && mileageValue) {
        mileageSlider.addEventListener('input', () => {
          this.mileage = parseInt(mileageSlider.value);
          mileageValue.textContent = this.mileage;
          this.updateCalculation();
        });
      }

      if (yearSlider && yearValue) {
        yearSlider.addEventListener('input', () => {
          this.year = parseInt(yearSlider.value);
          yearValue.textContent = this.year;
          this.updateCalculation();
        });
      }
    }

    updateSelectedOptions() {
      this.selectedOptions = [];
      let totalOptionsPrice = 0;

      document.querySelectorAll('input[name="options"]:checked').forEach(checkbox => {
        const option = checkbox.value;
        this.selectedOptions.push(option);
        totalOptionsPrice += this.optionPrices[option] || 0;
      });

      return totalOptionsPrice;
    }

    calculatePrice() {

      let price = this.basePrice * this.conditionMultiplier;


      const mileageDiscount = Math.max(0, (this.mileage - 100) * 1000); // 1000 руб за каждую 1000 км сверх 100 тыс.
      price -= mileageDiscount;


      const yearPremium = (this.year - 1990) * 10000; // 10000 руб за каждый год новее 1990
      price += yearPremium;


      const optionsPrice = this.updateSelectedOptions();
      price += optionsPrice;


      price = Math.max(price, 100000);


      const minPrice = Math.floor(price * 0.85);
      const maxPrice = Math.floor(price * 1.15);

      return {
        final: Math.floor(price),
        min: minPrice,
        max: maxPrice,
        breakdown: {
          base: this.basePrice,
          condition: this.conditionMultiplier,
          mileageDiscount: -mileageDiscount,
          yearPremium: yearPremium,
          options: optionsPrice
        }
      };
    }

    updateCalculation() {
      const result = this.calculatePrice();


      const formatPrice = (price) => {
        return price.toLocaleString('ru-RU') + ' ₽';
      };


      document.getElementById('finalPrice').textContent = formatPrice(result.final);
      document.getElementById('priceRange').textContent = `${formatPrice(result.min)} - ${formatPrice(result.max)}`;


      document.getElementById('breakdownBase').textContent = formatPrice(result.breakdown.base);
      document.getElementById('breakdownCondition').textContent = `× ${result.breakdown.condition}`;
      document.getElementById('breakdownMileage').textContent = formatPrice(result.breakdown.mileageDiscount);
      document.getElementById('breakdownOptions').textContent = formatPrice(result.breakdown.options);
      document.getElementById('breakdownTotal').textContent = formatPrice(result.final);


      const conditionText = this.getConditionText(this.conditionMultiplier);
      const optionsText = this.selectedOptions.length > 0 ? ` • ${this.selectedOptions.length} опций` : '';

      document.getElementById('resultDetails').textContent =
              `${this.year} год • ${this.mileage} тыс. км • ${conditionText}${optionsText}`;
    }

    getConditionText(multiplier) {
      switch(multiplier) {
        case 0.6: return 'Требует ремонта';
        case 1.0: return 'Хорошее состояние';
        case 1.5: return 'Отличное состояние';
        case 2.0: return 'Коллекционное состояние';
        default: return 'Хорошее состояние';
      }
    }

    goToStep(stepId) {

      document.querySelectorAll('.calc-step').forEach(step => {
        step.classList.remove('active');
      });


      const stepElement = document.getElementById(stepId);
      if (stepElement) {
        stepElement.classList.add('active');


        if (stepId === 'step4') {
          this.updateCalculation();
        }


        stepElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }

    openCalculator() {
      const modal = document.getElementById('calcModal');
      if (modal) {
        modal.style.display = 'block';
        document.body.style.overflow = 'hidden';


        this.goToStep('step1');


        const firstOption = document.querySelector('.calc-option');
        if (firstOption && !document.querySelector('.calc-option.selected')) {
          firstOption.click();
        }


        const goodCondition = document.querySelector('.condition-option[data-multiplier="1.0"]');
        if (goodCondition && !document.querySelector('.condition-option.selected')) {
          goodCondition.click();
        }
      }
    }

    saveCalculation() {
      const result = this.calculatePrice();
      const calculationData = {
        model: this.selectedModel,
        year: this.year,
        mileage: this.mileage,
        condition: this.getConditionText(this.conditionMultiplier),
        options: this.selectedOptions,
        price: result.final,
        priceRange: `${result.min} - ${result.max}`,
        date: new Date().toLocaleString('ru-RU')
      };


      const savedCalculations = JSON.parse(localStorage.getItem('bmw_e34_calculations') || '[]');
      savedCalculations.push(calculationData);
      localStorage.setItem('bmw_e34_calculations', JSON.stringify(savedCalculations));


      alert('Расчет сохранен! Вы можете просмотреть его позже в истории расчетов.');


      this.closeCalculator();
    }

    resetCalculator() {

      this.selectedModel = '525i';
      this.basePrice = 300000;
      this.conditionMultiplier = 1.0;
      this.mileage = 200;
      this.year = 1992;
      this.selectedOptions = ['manual'];


      document.querySelectorAll('.calc-option').forEach(o => o.classList.remove('selected'));
      document.querySelectorAll('.condition-option').forEach(o => o.classList.remove('selected'));
      document.querySelectorAll('input[name="options"]').forEach(cb => {
        cb.checked = cb.value === 'manual';
      });

      document.getElementById('mileageSlider').value = 200;
      document.getElementById('mileageValue').textContent = 200;
      document.getElementById('yearSlider').value = 1992;
      document.getElementById('yearValue').textContent = 1992;


      const defaultModel = document.querySelector('.calc-option[data-model="525i"]');
      const defaultCondition = document.querySelector('.condition-option[data-multiplier="1.0"]');

      if (defaultModel) defaultModel.click();
      if (defaultCondition) defaultCondition.click();


      this.goToStep('step1');
    }

    contactForThisCar() {
      const result = this.calculatePrice();


      const subject = `Запрос о BMW E34 ${this.selectedModel} (расчет)`;
      const body = `
Запрос о подборе автомобиля:

Модель: BMW ${this.selectedModel}
Год выпуска: ${this.year}
Пробег: ${this.mileage} тыс. км
Состояние: ${this.getConditionText(this.conditionMultiplier)}
Дополнительные опции: ${this.selectedOptions.join(', ') || 'нет'}

Расчетная стоимость: ${result.final.toLocaleString('ru-RU')} ₽
Диапазон: ${result.min.toLocaleString('ru-RU')} - ${result.max.toLocaleString('ru-RU')} ₽

Пожалуйста, сообщите о наличии подходящих вариантов.
        `.trim();


      window.location.href = `mailto:likazeni@ya.ru?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;


      this.closeCalculator();
    }

    closeCalculator() {
      const modal = document.getElementById('calcModal');
      if (modal) {
        modal.style.display = 'none';
        document.body.style.overflow = 'auto';
      }
    }
  }


  document.addEventListener('DOMContentLoaded', function() {
    const calculator = new PriceCalculator();
    calculator.init();


    const calcModal = document.getElementById('calcModal');
    if (calcModal) {
      calcModal.addEventListener('click', function(e) {
        if (e.target === this || e.target.classList.contains('close-modal')) {
          calculator.closeCalculator();
        }
      });
    }
  });
</script>
</body>
</html>